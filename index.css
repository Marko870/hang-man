/* ===== RESET ===== */
*, *::before, *::after { margin:0; padding:0; box-sizing:border-box; -webkit-tap-highlight-color:transparent; }
html, body { width:100%; height:100%; overflow:hidden; touch-action:none; }

body {
  background:#07070f;
  font-family:'Cairo',sans-serif;
  display:flex; align-items:center; justify-content:center;
}

/* grid bg */
body::before {
  content:''; position:fixed; inset:0; pointer-events:none; z-index:0;
  background:
    repeating-linear-gradient(0deg,   rgba(255,255,255,.02) 0,transparent 1px,transparent 44px),
    repeating-linear-gradient(90deg,  rgba(255,255,255,.02) 0,transparent 1px,transparent 44px);
}

/* ===== SCREENS ===== */
.screen {
  position:fixed; inset:0; z-index:10;
  display:flex; flex-direction:column;
  align-items:center; justify-content:center;
  padding:20px;
}
.screen.hidden { display:none !important; }

/* ===== LOBBY ===== */
.logo-wrap { text-align:center; margin-bottom:28px; }
.logo {
  font-family:'Orbitron',monospace; font-weight:900;
  font-size:clamp(2.2rem,9vw,4.2rem); letter-spacing:3px;
  color:#ffcc00;
  text-shadow:0 0 24px #ff6600, 0 0 60px rgba(255,100,0,.35);
  animation:logoPulse 2.2s ease-in-out infinite;
}
.logo span { color:#ff2244; }
@keyframes logoPulse {
  0%,100%{ text-shadow:0 0 24px #ff6600,0 0 60px rgba(255,100,0,.35); }
  50%    { text-shadow:0 0 36px #ff6600,0 0 90px rgba(255,100,0,.55),0 0 130px rgba(255,30,0,.2); }
}
.logo-sub { color:rgba(255,255,255,.4); font-size:.85rem; letter-spacing:3px; text-transform:uppercase; margin-top:4px; }

.lobby-card {
  background:rgba(255,255,255,.04);
  border:1px solid rgba(255,255,255,.09);
  border-radius:20px; padding:28px 24px;
  width:100%; max-width:340px;
  backdrop-filter:blur(12px);
  display:flex; flex-direction:column; gap:10px;
}

.field-label { color:rgba(255,200,0,.7); font-family:'Orbitron',monospace; font-size:.7rem; letter-spacing:2px; }

input {
  background:rgba(255,255,255,.07);
  border:1px solid rgba(255,255,255,.13);
  border-radius:10px; color:#fff;
  font-family:'Cairo',sans-serif; font-size:1rem;
  padding:12px 16px; outline:none;
  transition:border-color .2s, box-shadow .2s;
  text-align:center;
}
input:focus { border-color:#ff6600; box-shadow:0 0 0 3px rgba(255,100,0,.15); }
input::placeholder { color:rgba(255,255,255,.2); }

.opp-row { display:flex; gap:10px; justify-content:center; }
.opp-btn {
  width:58px; height:58px; border-radius:50%;
  border:2px solid rgba(255,255,255,.14);
  background:rgba(255,255,255,.05);
  color:rgba(255,255,255,.55);
  font-family:'Orbitron',monospace; font-size:1.3rem; font-weight:700;
  cursor:pointer; transition:all .18s;
}
.opp-btn.active {
  border-color:#ff6600; background:rgba(255,100,0,.22);
  color:#ffcc00; box-shadow:0 0 18px rgba(255,100,0,.4);
}

.start-btn {
  margin-top:8px;
  background:linear-gradient(135deg,#ff2244,#ff6600);
  border:none; border-radius:12px; color:#fff;
  font-family:'Orbitron',monospace; font-size:.9rem; font-weight:700;
  letter-spacing:1px; padding:16px; cursor:pointer;
  box-shadow:0 4px 22px rgba(255,60,0,.45);
  transition:all .2s; width:100%;
}
.start-btn:active { transform:scale(.97); }

/* ===== COUNTDOWN ===== */
#sCountdown { background:rgba(0,0,0,.88); backdrop-filter:blur(22px); }
.cd-label { font-family:'Orbitron',monospace; color:rgba(255,255,255,.35); letter-spacing:4px; font-size:.9rem; }
.cd-num {
  font-family:'Orbitron',monospace; font-size:22vw; font-weight:900;
  color:#ffcc00;
  text-shadow:0 0 50px #ff6600,0 0 100px rgba(255,100,0,.4);
  animation:cdPop .75s ease-out;
}
@keyframes cdPop { 0%{transform:scale(1.6);opacity:0} 100%{transform:scale(1);opacity:1} }

/* ===== GAME ===== */
#sGame { padding:0; }
#c { position:fixed; inset:0; width:100vw; height:100vh; z-index:1; display:block; }

/* HUD top */
.hud-top {
  position:fixed; top:0; left:0; right:0; z-index:30;
  display:flex; gap:8px; padding:10px 12px;
  pointer-events:none;
}
.hud-box {
  background:rgba(0,0,0,.72);
  border-radius:10px; padding:6px 12px;
  display:flex; flex-direction:column; align-items:center;
  border:1px solid rgba(255,255,255,.08);
}
.hud-lbl { color:rgba(255,255,255,.35); font-family:'Orbitron',monospace; font-size:.5rem; letter-spacing:2px; }
.hud-val { color:#ffcc00; font-family:'Orbitron',monospace; font-size:1rem; font-weight:700; line-height:1.2; }
#hudSpeed .hud-val { color:#ff2244; }

/* turbo bar */
.turbo-bar-wrap {
  width:64px; height:8px; background:rgba(255,255,255,.1);
  border-radius:4px; overflow:hidden; margin-top:3px;
}
.turbo-bar {
  height:100%; width:100%;
  background:linear-gradient(90deg,#00aaff,#00ff88);
  border-radius:4px;
  transition:width .08s, background .3s;
}
.turbo-bar.low { background:linear-gradient(90deg,#ff4400,#ff2244); }

/* Leaderboard */
.lb-panel {
  position:fixed; top:80px; left:10px; z-index:30;
  background:rgba(0,0,0,.72);
  border:1px solid rgba(255,255,255,.07);
  border-radius:12px; padding:10px 12px;
  min-width:130px; pointer-events:none;
}
.lb-head { font-family:'Orbitron',monospace; font-size:.5rem; color:rgba(255,255,255,.25); letter-spacing:2px; margin-bottom:7px; }
.lb-row { display:flex; align-items:center; gap:7px; margin-bottom:5px; }
.lb-pos  { color:rgba(255,255,255,.3); font-family:'Orbitron',monospace; font-size:.6rem; width:10px; }
.lb-ico  { font-size:.95rem; }
.lb-name { color:rgba(255,255,255,.75); font-size:.72rem; flex:1; }
.lb-lap  { color:rgba(255,255,255,.35); font-family:'Orbitron',monospace; font-size:.6rem; }
.lb-row.me .lb-name { color:#ffcc00; font-weight:700; }

/* ===== CONTROLS ===== */
.ctrl-wrap {
  position:fixed; bottom:0; left:0; right:0; z-index:30;
  display:flex; justify-content:space-between; align-items:flex-end;
  padding:14px 18px 18px;
}

/* hint جويستيك */
.joy-hint {
  color:rgba(255,255,255,.2); font-size:.75rem;
  font-family:'Orbitron',monospace; letter-spacing:1px;
  padding-bottom:30px; padding-left:10px;
  pointer-events:none;
}

/* Action buttons */
.action-btns { display:flex; flex-direction:column; gap:10px; }
.act-btn {
  width:76px; height:76px; border-radius:50%;
  display:flex; flex-direction:column; align-items:center; justify-content:center;
  font-size:1.5rem; cursor:pointer; user-select:none;
  touch-action:none; transition:all .1s;
  gap:2px;
}
.act-btn span { font-family:'Orbitron',monospace; font-size:.45rem; letter-spacing:1px; }

.turbo-btn {
  background:radial-gradient(circle,rgba(255,150,0,.35),rgba(255,60,0,.2));
  border:2px solid rgba(255,120,0,.6);
  color:#ffcc00;
  box-shadow:0 0 22px rgba(255,100,0,.3);
}
.turbo-btn.pressed {
  background:radial-gradient(circle,rgba(255,150,0,.7),rgba(255,60,0,.5));
  box-shadow:0 0 40px rgba(255,100,0,.7);
  transform:scale(.92);
}
.turbo-btn.empty { border-color:rgba(255,255,255,.2); color:rgba(255,255,255,.3); box-shadow:none; }

.slow-btn {
  background:radial-gradient(circle,rgba(0,150,255,.3),rgba(0,80,200,.15));
  border:2px solid rgba(0,150,255,.5);
  color:#00aaff;
  box-shadow:0 0 18px rgba(0,150,255,.25);
}
.slow-btn.pressed {
  background:radial-gradient(circle,rgba(0,150,255,.6),rgba(0,80,200,.4));
  box-shadow:0 0 35px rgba(0,150,255,.6);
  transform:scale(.92);
}
.slow-btn.empty { border-color:rgba(255,255,255,.2); color:rgba(255,255,255,.3); box-shadow:none; }

/* ===== RESULTS ===== */
#sResults { gap:16px; }
.res-title {
  font-family:'Orbitron',monospace; font-size:1.1rem; font-weight:900;
  color:#ffcc00; letter-spacing:3px; text-align:center;
  text-shadow:0 0 20px rgba(255,200,0,.5);
}
.podium { display:flex; align-items:flex-end; gap:10px; }
.pod-place { display:flex; flex-direction:column; align-items:center; gap:6px; }
.pod-ico  { font-size:2.4rem; }
.pod-name { color:rgba(255,255,255,.8); font-size:.75rem; text-align:center; max-width:80px; }
.pod-block {
  width:72px; border-radius:6px 6px 0 0;
  display:flex; align-items:center; justify-content:center;
  font-family:'Orbitron',monospace; font-weight:900; font-size:1.5rem;
}
.p1 .pod-block { height:82px; background:linear-gradient(180deg,#ffd700,#ff9900); color:#000; }
.p2 .pod-block { height:60px; background:linear-gradient(180deg,#ccc,#888); color:#000; }
.p3 .pod-block { height:44px; background:linear-gradient(180deg,#cd7f32,#8b4513); color:#fff; }
.res-time { color:rgba(255,255,255,.4); font-family:'Orbitron',monospace; font-size:.78rem; letter-spacing:2px; }

/* ===== TOAST ===== */
.toast {
  position:fixed; top:18px; left:50%; z-index:999;
  transform:translateX(-50%) translateY(-90px);
  background:rgba(255,100,0,.92); color:#fff;
  padding:9px 22px; border-radius:22px;
  font-size:.85rem; font-weight:700;
  transition:transform .28s; white-space:nowrap;
  pointer-events:none;
}
.toast.show { transform:translateX(-50%) translateY(0); }

/* FX layer */
.fx-layer { position:fixed; inset:0; pointer-events:none; z-index:200; overflow:hidden; }

/* slow effect overlay */
.slow-flash {
  position:fixed; inset:0; z-index:199; pointer-events:none;
  background:radial-gradient(circle,transparent 40%,rgba(0,100,255,.35) 100%);
  animation:slowFade .6s forwards;
}
@keyframes slowFade { 0%{opacity:1} 100%{opacity:0} }

/* confetti */
.cf {
  position:absolute; top:-10px; border-radius:2px;
  animation:cfFall linear forwards;
}
@keyframes cfFall { to{transform:translateY(110vh) rotate(720deg);opacity:0} }

