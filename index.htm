<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <title>๐๏ธ ุณุจุงู ุงููุงุฑ</title>
  <link rel="stylesheet" href="style.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.7.2/socket.io.min.js"></script>
</head>
<body>

  <!-- ===== LOBBY ===== -->
  <div class="screen" id="lobby">
    <div class="logo">๐๏ธ RACE<span>FIRE</span></div>
    <div class="subtitle">ุณุจุงู ุงููุงุฑ ุงูุชูุงูุณู</div>

    <div class="card">
      <h3>โก ุฅูุดุงุก ุบุฑูุฉ ุฌุฏูุฏุฉ</h3>
      <div class="input-group">
        <input type="text" id="createName" placeholder="ุงุณูู" maxlength="12">
        <button class="btn btn-primary" onclick="createRoom()">ุฅูุดุงุก ุบุฑูุฉ</button>
      </div>
    </div>

    <div class="divider">ุฃู</div>

    <div class="card">
      <h3>๐ช ุงูุถู ูุบุฑูุฉ</h3>
      <div class="input-group">
        <input type="text" id="joinName" placeholder="ุงุณูู" maxlength="12">
        <input type="text" id="joinCode" placeholder="ููุฏ ุงูุบุฑูุฉ" maxlength="4" class="code-input">
        <button class="btn btn-secondary" onclick="joinRoom()">ุงูุถู ุงูุขู</button>
      </div>
    </div>
  </div>

  <!-- ===== WAITING ROOM ===== -->
  <div class="screen hidden" id="waiting">
    <div class="room-code-display">
      <p>ููุฏ ุงูุบุฑูุฉ</p>
      <div class="room-code" id="displayCode">----</div>
    </div>

    <div class="players-grid" id="playersGrid">
      <div class="player-slot" id="slot0"><div class="car-emoji">๐ด</div><div class="waiting-text">ุงูุชุธุงุฑ...</div></div>
      <div class="player-slot" id="slot1"><div class="car-emoji">๐ต</div><div class="waiting-text">ุงูุชุธุงุฑ...</div></div>
      <div class="player-slot" id="slot2"><div class="car-emoji">๐ก</div><div class="waiting-text">ุงูุชุธุงุฑ...</div></div>
      <div class="player-slot" id="slot3"><div class="car-emoji">๐ข</div><div class="waiting-text">ุงูุชุธุงุฑ...</div></div>
    </div>

    <div class="waiting-status" id="waitingStatus">ูู ุงูุชุธุงุฑ ุงููุงุนุจูู...</div>
    <button class="btn btn-primary" id="startBtn" style="max-width:200px; display:none" onclick="startGame()">๐ ุงุจุฏุฃ ุงูุณุจุงู</button>
    <button class="btn btn-secondary" style="max-width:200px" onclick="goLobby()">โ ุฑุฌูุน</button>
  </div>

  <!-- ===== COUNTDOWN ===== -->
  <div class="screen hidden" id="countdown">
    <div class="countdown-label">ุงูุณุจุงู ูุจุฏุฃ ูู</div>
    <div class="countdown-num" id="countNum">3</div>
  </div>

  <!-- ===== GAME ===== -->
  <div class="screen hidden" id="game">
    <canvas id="gameCanvas"></canvas>

    <!-- HUD -->
    <div class="hud">
      <div class="lap-info">
        <div class="label">ูููุฉ</div>
        <div class="value" id="lapDisplay">1 / 3</div>
      </div>
      <div class="speed-display">
        <div class="label">ุงูุณุฑุนุฉ</div>
        <div class="value" id="speedDisplay">0</div>
      </div>
    </div>

    <!-- Leaderboard -->
    <div class="leaderboard-hud" id="leaderboardHud">
      <div class="lb-title">ุชุฑุชูุจ ุงูุณุจุงู</div>
      <div id="lbRows"></div>
    </div>

    <!-- Controls -->
    <div class="controls">
      <div class="steering-area">
        <div class="ctrl-btn" id="btnLeft"
          ontouchstart="pressLeft(true)" ontouchend="pressLeft(false)">โ</div>
        <div class="ctrl-btn" id="btnRight"
          ontouchstart="pressRight(true)" ontouchend="pressRight(false)">โถ</div>
      </div>
      <div class="gas-btn" id="btnGas"
        ontouchstart="pressGas(true)" ontouchend="pressGas(false)">โก</div>
    </div>
  </div>

  <!-- ===== RESULTS ===== -->
  <div class="screen hidden" id="results">
    <div class="winner-title">๐ ูุชุงุฆุฌ ุงูุณุจุงู</div>
    <div class="podium" id="podium"></div>
    <button class="btn btn-primary" style="max-width:220px" onclick="goLobby()">๐ ุณุจุงู ุฌุฏูุฏ</button>
  </div>

  <!-- ===== UTILITIES ===== -->
  <div class="toast" id="toast"></div>
  <div class="confetti-container" id="confettiContainer"></div>

  <script src="index.js"></script>
</body>
</html>
